<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>퀄리스포츠 전국 대리점</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 폰트: Noto Sans KR -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <!-- 아이콘: FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- [필수] Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <!-- 분리된 CSS 연결 -->
    <link rel="stylesheet" href="css/style.css">
</head>
<!-- [보안] 우클릭/드래그/선택 방지 적용 -->

<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false">

    <header id="mainHeader">
        <div class="header-top-row">
            <div class="brand-title">
                <i class="fa-solid fa-map-location-dot"></i>
                전국 대리점 안내
            </div>
            <div class="header-info">가까운 공식 대리점을 검색해보세요</div>
        </div>

        <!-- 모바일에서 헤더로 이동될 컨트롤 영역 (데스크탑은 aside 내부에 위치) -->
        <div id="mobileControlPortal" class="mobile-only-header-controls"></div>
    </header>

    <div class="main-container">
        <!-- 왼쪽 패널 -->
        <aside class="list-panel">

            <div class="control-area" id="controlArea">
                <!-- 1단: 검색창 -->
                <div class="search-input-row">
                    <!-- [수정] autocomplete="off" 속성 추가하여 브라우저 자동완성 차단 -->
                    <input type="text" id="searchInput" placeholder="지역명 또는 매장명 입력"
                        oninput="toggleClearBtn(); filterData()" autocomplete="off">
                    <button class="btn-clear-search" id="clearSearchBtn" onclick="clearSearch()"><i
                            class="fa-solid fa-circle-xmark"></i></button>
                    <button class="search-btn" onclick="filterData()"><i
                            class="fa-solid fa-magnifying-glass"></i></button>
                </div>

                <!-- [신규] 지도 제어 버튼 통합 (핀 묶기, 내 위치, 다크모드) -->
                <div class="map-controls-row">
                    <button id="btnCluster" class="control-btn active" onclick="toggleClustering()">
                        <i class="fa-solid fa-layer-group"></i> 핀 묶어보기
                    </button>
                    <button id="btnMyLocation" class="control-btn" onclick="toggleMyLocation()">
                        <i class="fa-solid fa-location-crosshairs"></i> 내 위치
                    </button>
                    <button id="btnDarkMode" class="control-btn" onclick="toggleDarkMode()">
                        <i class="fa-solid fa-moon"></i> 다크모드
                    </button>
                </div>

                <!-- 2단: 필터 버튼 모음 -->
                <div class="filter-buttons-row">
                    <!-- [주석처리] 프리미엄 필터 비활성화
                    <label class="filter-btn premium-filter">
                        <input type="checkbox" id="premiumCheck" onchange="updateFilter(this); filterData()">
                        <i class="fa-solid fa-crown"></i>
                        <span>프리미엄</span>
                    </label>
                    -->

                    <label class="filter-btn onecare-filter">
                        <input type="checkbox" id="oneCareCheck" onchange="updateFilter(this); filterData()">
                        <i class="fa-solid fa-screwdriver-wrench"></i>
                        <span>원케어</span>
                    </label>

                    <label class="filter-btn testride-filter">
                        <input type="checkbox" id="testRideCheck" onchange="updateFilter(this); filterData()">
                        <i class="fa-solid fa-motorcycle"></i>
                        <span>시승</span>
                    </label>
                </div>

                <!-- [선택됨 표시] -->
                <div id="selectedStoreBar" class="selected-info-bar">
                    <span><i class="fa-solid fa-check-circle"></i> 선택된 대리점: <strong
                            id="selectedStoreName"></strong></span>
                    <button class="btn-clear-select" onclick="clearSelection()"><i
                            class="fa-solid fa-xmark"></i></button>
                </div>

                <!-- 3단: 탭 영역 -->
                <div class="tabs-container">
                    <button class="scroll-btn" onclick="scrollTabs('left')"><i
                            class="fa-solid fa-chevron-left"></i></button>
                    <div class="category-tabs" id="categoryTabs">
                        <div class="tab-btn active" onclick="setCategory('all', this)">전체</div>
                        <div class="tab-btn" onclick="setCategory('서울', this)">서울</div>
                        <div class="tab-btn" onclick="setCategory('경기', this)">경기</div>
                        <div class="tab-btn" onclick="setCategory('인천', this)">인천</div>
                        <div class="tab-btn" onclick="setCategory('강원', this)">강원</div>
                        <div class="tab-btn" onclick="setCategory('충남', this)">충남</div>
                        <div class="tab-btn" onclick="setCategory('충북', this)">충북</div>
                        <div class="tab-btn" onclick="setCategory('대전', this)">대전</div>
                        <div class="tab-btn" onclick="setCategory('세종', this)">세종</div>
                        <div class="tab-btn" onclick="setCategory('전남', this)">전남</div>
                        <div class="tab-btn" onclick="setCategory('전북', this)">전북</div>
                        <div class="tab-btn" onclick="setCategory('경남', this)">경남</div>
                        <div class="tab-btn" onclick="setCategory('경북', this)">경북</div>
                        <div class="tab-btn" onclick="setCategory('대구', this)">대구</div>
                        <div class="tab-btn" onclick="setCategory('부산', this)">부산</div>
                        <div class="tab-btn" onclick="setCategory('울산', this)">울산</div>
                        <div class="tab-btn" onclick="setCategory('제주', this)">제주</div>
                    </div>
                    <button class="scroll-btn" onclick="scrollTabs('right')"><i
                            class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="list-content" id="listContent">
                <div class="message-box">
                    <i class="fa-solid fa-spinner fa-spin fa-2x"></i><br><br>데이터를 불러오는 중입니다...
                </div>
            </div>
            <button class="btn-top" id="topBtn" onclick="scrollToListTop()">
                <i class="fa-solid fa-arrow-up"></i>
            </button>
        </aside>

        <!-- 오른쪽 패널: Leaflet Map -->
        <main class="map-panel">
            <div id="map"></div>
        </main>
    </div>

    <!-- [신규] 모바일 상세 모달 -->
    <div id="mobileModalOverlay" class="mobile-modal-overlay" onclick="closeMobileModal(event)">
        <div class="mobile-modal-container" onclick="event.stopPropagation()">
            <button class="btn-close-modal" onclick="closeMobileModal()"><i class="fa-solid fa-xmark"></i></button>
            <div id="mobileModalBody"></div>
        </div>
    </div>

    <!-- 외부 라이브러리 -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <!-- 분리된 JS 연결 -->
    <script src="js/script.js"></script>
</body>

</html>